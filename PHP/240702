2024/07/02の積み上げ

2024/07/02

- ブックマーク機能の実装

- 疑問に思ったこと
    - bookmarksテーブルのカラム構成
        - 外部キーが2つあるのは想像がつく、ブックマークの有無に関しては、trueかfalseのカラムをせっていするのかな？
        - それともレコードがある場合、ない場合で考えるのかな
            - 後者のuser_idとboard_idの組み合わせにて判断していた
    - bookmarkのルーティングはboardにネストしたほうが実装しやすい
        - その場合、コントローラー名はboardmookmarkみたいになるのか？
    - ルーティングが反映されないとき
        - route:clearを使用する
        - 原理はわからんが再度、route:listにて表示される
    - 意味@if ($board->bookmarks->where('user_id', Auth::user()->id)->isEmpty())
        - whereを使うことによってsqlクエリがデータベースに送信されている
        - isEmptyは空って意味。つまり検索結果が空の時にtrueの処理をしてほしいときに書く
    - 

- やること
    - 掲示板詳細画面と一覧画面にブックマーク用のリンクが表示されていること
    - ブックマーク作成用のリンクをクリックすると、Bookmarkが作成され、リンクが削除用に変わること
    - ブックマーク削除用のリンクをクリックすると、Bookmarkが削除され、リンクが作成用に変わること
    - ブックマークの作成・削除用にBookmarksControllerが作成されていること
    - bookmarksテーブルを追加するmigrationファイルが作成されていること
    - Bookmarkモデルが作成されていること
    - BoardモデルとBookmarkモデルにアソシエーションが設定されていること
    - UserモデルとBookmarkモデルにアソシエーションが設定されていること
    
- 残りの実装
    - ブックマーク時、アイコンを変更させる
    - 削除の処理も実行する
